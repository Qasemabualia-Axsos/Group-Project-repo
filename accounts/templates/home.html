{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RateUp | Home</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #0e0e0e;
      color: #f1f1f1;
      font-family: 'Poppins', sans-serif;
    }
    .navbar {
      background-color: #121212;
      border-bottom: 2px solid #ffc107;
    }
    .navbar-brand {
      color: #ffc107 !important;
      font-weight: bold;
      font-size: 1.6rem;
    }
    .nav-link {
      color: #ddd !important;
      margin-right: 1rem;
      transition: 0.3s;
    }
    .nav-link:hover {
      color: #ffc107 !important;
    }

    .hero {
      background: url("{% static 'images/home-bg.jpg' %}") center/cover no-repeat fixed;
      height: 40vh;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
    }
    .hero-content {
      position: relative;
      z-index: 2;
    }
    .hero h1 {
      color: #ffc107;
      font-weight: bold;
    }

    .movie-card {
      background-color: #1a1a1a;
      border-radius: 10px;
      overflow: hidden;
      transition: 0.3s;
    }
    .movie-card:hover {
      transform: scale(1.03);
    }
    .movie-card img {
      width: 100%;
      height: 400px;
      object-fit: cover;
    }
    .movie-info {
      padding: 15px;
    }

    footer {
      background-color: #111;
      color: #aaa;
      text-align: center;
      padding: 20px;
      border-top: 1px solid #222;
      margin-top: 40px;
    }

    footer a {
      color: #ffc107;
      text-decoration: none;
      margin: 0 5px;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark sticky-top">
  <div class="container">
    <a class="navbar-brand" href="#"><i class="bi bi-film"></i> RateUp</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-house-door"></i> Home</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'api:api' %}"><i class="bi bi-fire"></i> Upcoming</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'accounts:login' %}"><i class="bi bi-box-arrow-in-right"></i> Login</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'accounts:register_page' %}"><i class="bi bi-person-plus"></i> Register</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Hero Section --> <section class="hero"> <div class="hero-content text-light"> <h1 class="display-4 fw-bold text-warning">About <span class="text-light">RateUp</span></h1> <p class="lead">A platform created for movie enthusiasts to explore, rate, and discuss their favorite films and shows.</p> <p>Join the community and discover what to watch next.</p> </div> </section>

<div class="container mt-5">
  <h2 class="text-warning text-center mb-4">Browse by Category</h2>

  <form id="categoryForm" class="d-flex justify-content-center mb-4">
    <select name="category" id="categorySelect" class="form-select w-50">
      <option value="">All Categories</option>
      {% for cat in categories %}
        <option value="{{ cat.name }}" {% if cat.name == selected_category %}selected{% endif %}>
          {{ cat.name }}
        </option>
      {% endfor %}
    </select>
  </form>

  <!-- Movie list container -->
  <div id="movieList" class="row g-4">
    {% for movie in Movies %}
      <div class="col-md-4">
        <div class="movie-card">
          <a href="{% url 'movies:view_movie' movie.id %}">
            <img src="{{ movie.cover_img.url }}" alt="{{ movie.title }}">
          </a>
          <div class="movie-info">
            <h5 class="text-warning">{{ movie.title }}</h5>
            <p class="text">Released: {{ movie.release_date }}</p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<!-- Footer -->
  <footer>
    <p>© 2025 RateUp | Built with ❤️ by Team</p>
    <div>
      <a href="/about/">About</a> |
      <a href="/contact/">Contact</a> |
      <a href="https://github.com/Qasemabualia-Axsos/Group-Project-repo" target="_blank">GitHub Repo</a>
    </div>
  </footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const categorySelect = document.getElementById("categorySelect");
  const movieList = document.getElementById("movieList");

  categorySelect.addEventListener("change", function() {
    const category = this.value;
    const url = `?category=${encodeURIComponent(category)}`;

    // Show loading state
    movieList.innerHTML = `<p class="text-center text-warning">Loading...</p>`;

    fetch(url, {
      headers: { "X-Requested-With": "XMLHttpRequest" }
    })
    .then(response => response.json())
    .then(data => {
      movieList.innerHTML = "";

      if (data.movies.length === 0) {
        movieList.innerHTML = `<p class="text-center text-">No movies found for this category.</p>`;
        return;
      }

      data.movies.forEach(movie => {
        const card = `
          <div class="col-md-4">
            <div class="movie-card">
              <a href="/view_movie/${movie.id}">
                <img src="${movie.cover_img}" alt="${movie.title}">
              </a>
              <div class="movie-info">
                <h5 class="text-warning">${movie.title}</h5>
                <p class="text">Released: ${movie.release_date}</p>
              </div>
            </div>
          </div>
        `;
        movieList.insertAdjacentHTML('beforeend', card);
      });
    })
    .catch(error => {
      console.error("Error loading movies:", error);
      movieList.innerHTML = `<p class="text-center text-danger">Error loading movies.</p>`;
    });
  });
});
</script>
</body>
</html>
