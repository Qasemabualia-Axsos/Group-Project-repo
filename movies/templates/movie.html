{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ movie.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'movies/movie.css' %}">
</head>

<body>
    <div class="main-bg" style="background-image: url('{{ movie.cover_img.url }}');">
        <div class="overlay">
            <div class="container d-flex align-items-center justify-content-center min-vh-100">
                <div class="card shadow-lg rounded p-4 w-100" style="max-width: 960px; background-color: white;">
                    <div class="row g-4 align-items-center">
                        <a href="{% url 'movies:dashboard' %}" class="btn btn-secondary">Dashboard</a>
                        <a href="{% url 'reviews:movie_reviews' movie.id%}" class="btn btn-secondary">Review Now!</a>
                        <!-- Movie Info -->
                        <div class="col-md-7">
                            <h2 class="mb-3">{{ movie.title }}</h2>
                            <p>{{ movie.description }}</p>

                            <h5 class="mt-3">Release Date: <small class="text-muted">{{ movie.release_date }}</small>
                            </h5>

                            <h5 class="mt-3">Directors:</h5>
                            <ul>
                                {% for director in directors %}
                                <li>{{ director.name }}</li>
                                {% empty %}
                                <li>N/A</li>
                                {% endfor %}
                            </ul>
                        </div>

                        <!-- Trailer -->
                        <div class="col-md-5">
                            {% if movie.trailer %}
                            {% with movie.trailer|cut:"https://www.youtube.com/watch?v=" as video_id %}
                            <div class="ratio ratio-16x9">
                                <iframe
                                    src="https://www.youtube.com/embed/{{ video_id }}?autoplay=1&mute=1&loop=1&playlist={{ video_id }}"
                                    title="YouTube video" frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                            </div>
                            {% endwith %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Top Casts Section -->
    <div class="container my-5">
        <h3 class="text-light mb-4 border-bottom border-light pb-2">Top Casts</h3>
        <div class="row g-4">
            {% for actor in actors %}
                <div class="cast-card p-2">
                    <img src="{{ actor.profile_img.url }}" alt="{{ actor.name }}" class="img-fluid rounded-circle mb-2"
                        style="height: 120px; width: 120px; object-fit: cover;">
                    <h6 class="text-light mb-1">{{ actor.name }}</h6>
                    {% if actor.character_name %}
                    <small class="text-muted fst-italic">{{ actor.character_name }}</small>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <p class="text-light">No actors available for this movie.</p>
            {% endfor %}
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>